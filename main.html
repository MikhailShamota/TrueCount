<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>True count</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="js/three.js"></script>
    <script type="text/javascript" src="js/RequestAnimationFrame.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/stats.min.js"></script>
    <script src="js/Octree.js"></script>
    <script src="js/THREE.MeshLine.js"></script>
    <script src="my_js/OctreeParticles.js"></script>
</head>
<body>
<div id="Stats-output">
</div>

<script type="text/javascript" src="my_js/TrueCount.js"></script>
<!--<script type="text/javascript" src="my_js/elasticdata.js"></script>-->
<script type="text/javascript" src="my_js/filedata.js"></script>

<!--TEST DATA-->
<div style="position: absolute; top: 50vh; left: 50vw;">
    <input type="file" id="files" name="files[]" multiple />
</div>
<script>

    document.getElementById('files').addEventListener('change', handleFileSelect, false);

    function handleFileSelect( event ) {

        var files = event.target.files;

        for ( var i = 0; i < files.length; i++ ) {

            parseFile( files[ i ], function( str ) {

                console.log( str );
                console.log( '============CHUNK==============');

                str.split( '\n').map( function( line ) {

                    parseLine( line );
                });
            } );
        }
    }

    function parseLine( str ) {

        try {

            var rec = JSON.parse( str );
            TrueCount.loadNode( rec );
        } catch (e) {

        }


            /*    var branch = {

                    src: node.id,
                    dst: v.id,
                    doc: null,
                    weight: 1
                }

                TrueCount.loadBranch( branch );*/
    }

    TrueCount.init();
    TrueCount.draw();
</script>





</body>
</html>